# file opened: c:\Users\cpujo\Desktop\Aoc\Tarea2-IX\Teclado.asm
 1    0000              JugarSlot:
 2    0000 06 00                ld b,$00
 3    0002 1E 00                ld e,$00
 4    0004              bucleteclas:
 5    0004 21 49 58         ld hl,$5849
 6    0007
 7    0007 CD 12 00         CALL EsperarSoltar
 8    000A CD 1B 00         CALL EsperarPulsar
 9    000D
10    000D
11    000D FE 01            cp $01
12    000F 20 F3            jr nz,bucleteclas;salta cuando est√° a 0
13    0011 C9                   RET
14    0012              EsperarSoltar:;se comprueba si la tecla q es pulsada
15    0012 3E FB                ld a,$fb
16    0014 DB FE                in a,($fe)
17    0016 FE FF                cp $FF
18    0018 20 F8                jr nz,EsperarSoltar
19    001A C9                   RET
20    001B
21    001B              EsperarPulsar:
22    001B 3E FB                ld a,$fb
23    001D DB FE                in a,($fe)
24    001F CB 47                bit 0,a;con el bit se cambia de tecla,tecla q
25    0021 28 12                jr z,TeclaQPulsada
26    0023 3E FB                ld a,$fb
27    0025 DB FE                in a,($fe)
28    0027 CB 4F                bit 1,a;con el bit se cambia de tecla,tecla w
29    0029 28 14                jr z,TeclaWPulsada
30    002B 3E FB                ld a,$fb
31    002D DB FE                in a,($fe)
32    002F CB 67                bit 4,a;con el bit se cambia de tecla,tecla t
33    0031 28 16                jr z,TeclaTPulsada
34    0033 18 E6                jr EsperarPulsar;si pulsa Salta
35    0035
36    0035              TeclaQPulsada:;entra aqui si esta pulsando una tecla
37    0035 7B                   ld a,e
38    0036 C6 08               add $08
39    0038 77                   ld(hl),a
40    0039 5F                   ld e,a
41    003A FE 40               cp $40
42    003C 28 0E               jr z,ReinicioColor1
43    003E C9                   RET
44    003F
45    003F              TeclaWPulsada:
46    003F 7B                   ld a,e
47    0040 D6 08                sub $08
48    0042 77                   ld(hl),a
49    0043 5F                   ld e,a
50    0044 FE 00                cp $00
51    0046 28 08                jr z,ReinicioColor2
52    0048 C9                   RET
53    0049              TeclaTPulsada:
54    0049 3E 01                ld a,1
55    004B C9                   RET
56    004C
57    004C              ReinicioColor1:
58    004C 1E 00                ld e,$00
59    004E 28 CB                jr z,EsperarPulsar
60    0050              ReinicioColor2:
61    0050 1E 32                ld e,$32
62    0052 28 C7                jr z,EsperarPulsar
# file closed: c:\Users\cpujo\Desktop\Aoc\Tarea2-IX\Teclado.asm
